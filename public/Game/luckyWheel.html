<!DOCTYPE html>
<html>
  <head>
    <title>Rewards</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="./assets/css/style2.css" />
    <link href="./assets/img/f1_title_logo_22.png" rel="icon">
  
    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  
    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/3772469bf7.js" crossorigin="anonymous"></script>
    <script src = "https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src = "https://unpkg.com/moralis/dist/moralis.js"></script>
    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet">
  </head>

  <body>
    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top d-flex align-items-cente">
        <div class="container-fluid container-xl d-flex align-items-center justify-content-lg-between">
      
          <!--<h1 class="logo me-auto me-lg-0"><a href="index.html">Restaurantly</a></h1>-->
          <a href="" class="logo me-auto me-lg-0"><img src="assets/img/Logo_2.png" alt="" class="img-fluid"></a>
          <script>
            function Signout() {
              sessionStorage.removeItem('user');
              localStorage.removeItem('user');
              localStorage.removeItem('keepLoggedIn');
              window.location = '/';
            }
          </script>
          <nav id="navbar" class="navbar order-last order-lg-0">
            <ul>
              <i class="fa-solid fa-wallet fa-1x" style="color: #cda45e;"></i>
              <li id="VirtualCurrency" style="color: #cda45e; margin-right: 200px; margin-left: 10px; font-size: 20px;" ></li>
              <li><i class = "fa-solid fa-user" id="UserName" style="color: #cda45e; margin-right: 200px;"></i></li>
              <li><button class="book-a-table-btn scrollto d-none d-lg-flex" onclick="Signout()">Sign Out</button></li>
            </ul>
            <script type = "module" src = "./assets/js/VirtualCurrency.js"></script>
            <script>
              const currentUser = JSON.parse(localStorage.getItem('user'));
              document.getElementById("UserName").innerText = currentUser;
            </script>
            <i class="bi bi-list mobile-nav-toggle"></i>
          </nav><!-- .navbar -->
      
      
        </div>
      </header><!-- End Header -->
    <div id = "subHeader">
        <h2>Rewards</h2>
        <h3>Spin Our Sure-Win Lucky Wheel</h3>
    </div>
    <div id="app" style="display: inline-block; position: fixed;">
        <div class = "random">
            <img class="marker" src="./assets/img/marker.png" />
            <img class="wheel" src="./assets/img/wheel.png"/>
        </div>
      <!--<img class="button" src="./assets/img/button.png" />-->
    </div>
    <div style="display: inline-block; margin-left: 43%; margin-top: 10%;">
        <p id="congrats">Congratulations! You Won:</p>
        <div class="display">-</div>
        <button class="twoBtns" id ="Redeem" style="pointer-events: none;">Redeem</button>
        <button class="twoBtns" id="quit" style="pointer-events: none;">Forfeit</button>
    </div>
    <!--<script type = "module" src = "./assets/js/payUsers.js"></script>-->
    <script src = "./assets/js/NFT.js"></script>
    <button class = "button" id = "book-a-table-btn2" style="margin-top: 4%; position: fixed;">Spin</button>

    <script src="./assets/node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script type = "module" src="./assets/js/luckyWheel2.js"></script>
    <script type="module">
      import {initializeApp} from "https://www.gstatic.com/firebasejs/9.8.1/firebase-app.js";
      import {getDatabase, ref, update, get} from "https://www.gstatic.com/firebasejs/9.8.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBTE9LzXJdLd2-zQFCU9HlxevzanZRbQWg",
        authDomain: "f1cft-493d1.firebaseapp.com",
        databaseURL: "https://f1cft-493d1-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "f1cft-493d1",
        storageBucket: "f1cft-493d1.appspot.com",
        messagingSenderId: "414144945872",
        appId: "1:414144945872:web:4926d78a5a38ae78b908d5",
        measurementId: "G-WNE15MGBR0"
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const currentUser = JSON.parse(localStorage.getItem('usr')); 
      const starCountRef = ref(db, 'users/' + currentUser.uid + '/visited');
      get(starCountRef).then((snapshot) => {
        const data = snapshot.val();
        console.log(data)
        if (data == 1) {
          document.getElementById('book-a-table-btn2').style.pointerEvents = 'none';
          document.getElementById('Redeem').style.pointerEvents = 'none';
        }
      })
    </script>
  </body>
</html>